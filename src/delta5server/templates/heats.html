{% extends "layout.html" %} {% block title %}Heats{% endblock %} {% block head %} {% endblock %} {% block content %}

<!--Display the heats-->
<h2>Heats</h2>
<div class="heats">
	{% for heat in heats.query.with_entities(heats.heat_id).distinct().order_by(heats.heat_id) %}
	<div class="heat">
		<h3>Heat {{ heat.heat_id }}</h3>
		<table class="table">
			{% for node in range(num_nodes) %}
			<tr>
				<td>
					{{ channels[node] }} {{ frequencies[node] }}
				</td>
				<td>
					{{ pilots.query.filter_by(pilot_id= heats.query.filter_by(heat_id=heat.heat_id,node_index=node).first().pilot_id ).first().callsign
					}}
				</td>
			</tr>
			{% endfor %}
		</table>
	</div>
	{% endfor %}
</div>

<!--Display the pilots-->
<h2>Pilots</h2>
<div class='pilots'>
	<table>
		<thead>
			<tr>
				<th>Call Sign</th>
				<th>Name</th>
			</tr>
		</thead>
		<tbody>
			{% for pilot in pilots.query.all() %} {% if pilot.pilot_id != 0 %}
			<tr>
				<td>{{ pilot.callsign }}</td>
				<td>{{ pilot.name }}</td>
			</tr>
			{% endif %} {% endfor %}
		</tbody>
	</table>
</div>

{% endblock %}